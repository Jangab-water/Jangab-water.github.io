[ { "title": "AWS vs NCP: 권한의 관점에서", "url": "/posts/test-page/", "categories": "Cloud, NaverCloudPlatform", "tags": "NCP, AWS, IAM", "date": "2022-07-24 00:00:00 +0900", "snippet": "권한 관리는 조직에서 굉장히 중요한 요소입니다. 회사는 비즈니스로 이익을 보는 집단이고, 그러한 집단에서 정보는 곧 이익과 직결되기 때문에 각 사업소, 팀, 직무, 직급 등 회사에 관여하는 기여도 및 능력에 따라 회사의 핵심 리소스에 대한 접근을 제한하고 분류합니다.클라우드 리소스는 그러한 권한 관리의 일환으로 CSP사(Cloud Service Provider, 클라우드 서비스 공급자)는 클라우드에 가입한 메인 계정(이하 root)으로부터 파생된 서브 계정과 권한, 역할 등의 요소로 서브 계정이 어디까지 리소스를 사용할 수 있는지의 여부를 제한합니다.NCP와 AWS는 각각 국내와 글로벌 CSP사로 많이 사용되고 있습니다. 오늘은 NCP 및 AWS의 서브 사용자의 권한과 제한을 차이점 위주로 알아보겠습니다.사용자서브 계정의 레벨에서는 약간 차이가 있는데, NCP와 AWS 모두 로그인 시 루트 사용자의 접속 키, 사용자 ID, 패스워드를 요구하고, 로그인 이후 2차 인증을 제공하는 것 역시 동일하지만 부여 및 진행에 큰 차이가 있습니다.NCPNCP는 계정 단위에서 2차 인증 방식으로 이메일 및 SMS 인증, OTP를 사용하고 있습니다. 둘 중 사용자가 방식을 선택하여 진행할 수 있으며, 서브 어카운트 생성 및 최초 접속시 2차 인증 수단을 등록하고 진행하도록 합니다.AWSAWS는 2차 인증수단으로 MFA를 제공합니다. MFA는 Multi Factor Authentication의 약자로 OTP방식과 동일합니다. 계정 단위에서 2차 인증이 설정되는 NCP와 달리, AWS는 정책을 통해 2차 인증을 설정합니다. 거기에 더해 MFA를 통한 임시 인증도 활성화 할 수 있습니다.임시 인증(STS) 기능은 cli로 리소스를 조작하는 경우가 종종 있는 awscli 사용자를 대상으로 한 인증 방식으로, 일반적인 AccessKey 및 SecretKey를 사용한 방식이 아니라 AWS의 API 서버를 대상으로 한 세션을 지급하는 방식입니다. 해당 인증을 진행할 경우 기존의 AccessKey, SecretKey가 아닌, 별도의 인증 세션을 제공하여 이 세션을 통해서만 리소스를 조작할 수 있습니다.IAM STS Credentials정책 종류정책에서 NCP와 AWS는 큰 차이를 보입니다. 이번에도 차이점 위주로 짚어보겠습니다.NCP정책은 사용자 및 그룹에 적용되며 사용자가 액세스 가능한 권한의 컬렉션입니다. 플랫폼(VPC or Classic), 허용 여부(Allow), 대상 리소스의 3종류로 구성되어있으며, 권한은 읽기 및 보기만 가능한 Viewer와 해당 리소스에 모든 액세스가 가능한 Admin의 2종류가 있습니다.NCP IAM CategoriesAWS정책은 사용자, 그룹, 리소스에 적용되며 서버리스, SaaS 상품의 경우엔 별도로 역할(Role)이 부여되어, 해당 리소스가 타 서비스에 접속하는 것을 차단합니다. 각 정책은 JSON 형태로 관리되며 ARN(AWS Resource Name)이라는 고유의 Key값을 가지고 있습니다. 이 ARN은 AWS 서비스 전반에 걸쳐 액세스 권한을 증빙하는 ID 역할을 하는 중요한 요소입니다. 각 권한은 View와 Admin만 제공하는 NCP보다 더 다양한 종류의 권한(Read, Write, View, Execute 등)을 각 리소스별로 분류해 제공하고 있습니다.AWS IAM Policies역할NCPNCP에서는 잘 사용되지 않는 권한으로, 서버 상품에만 부여가 가능하며 역할을 부여받은 서버에서는 별도의 권한이 없는 사용자라도 역할에 설정된 리소스로의 접근이 가능합니다.AWS각종 리소스에 부여가 되며(SaaS, Serverless 종류), IAM 사용자와 같이 정책을 할당받아 권한을 획득합니다. 동작은 역할을 부여받은 리소스에서 타 서비스로의 접근을 허용하거나 제한합니다. 상품 생성시 역할이 적용되는 상품에는 보통 자동으로 생성되도록 되어있으며, 추가로 해당 서비스에서 다른 서비스로 추가 액세스가 필요할 경우 그 역할에 필요한 권한을 추가로 부여해야 합니다.AWS IAM Roles1AWS IAM RolePolicies1AWS vs NCPAWS는 세밀한 권한 제어를 가능하게 하는 대신, 그만큼 진입장벽이 높고 뭔가 해보려고 하면 어마어마한 권한의 장벽에 정신을 잃어버리게 됩니다. 여기엔 다루지 않았지만 IaaS 상품이 사용하는 보안 그룹과 ACL, ACG도 있죠. AWS를 하며 가장 많이 보는 오류는 Access Denied 라는 말이 과언이 결코 아닙니다. 선택지가 다양한 만큼, 그걸 관리하는데 그만한 인적 자원이 소모됩니다. 뭔가 약간 하고 나서 어마어마하게 증식되어있는 역할들을 주기적으로 정리하는 것도 쉬운 일이 결코 아닙니다.반면 NCP는 권한을 부여하고 관리하는데 그렇게 많은 리소스가 소모되지 않습니다. 일단 한글 친화적이어서 접근성이 높고, 리소스들의 권한 관리가 직관적인 점은 분명한 장점이지만, 반대로 말하면 내가 권한을 줄때는 화끈하게 다 줘버리던가, 아니면 손가락만 빨게 하던가 둘중 하나만 선택해야 합니다. 고급진 단어로는 세밀한 제어가 어렵다고 해야겠네요.vs라고 적어놓기는 했지만, 사실 승자는 없습니다. 엄마와 아빠중 누가 더 좋냐는 질문에서 승자는 먼저 초코파이를 쥐어주는 쪽이라는 것처럼, 어느 쪽을 더 많이 사용해봤냐 정도의 차이가 선호도 여부를 가를 것 같습니다." } ]
